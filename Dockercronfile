FROM ubuntu
RUN apt-get update && \
    apt-get install -y cron python3-pip curl vim 
RUN apt-get install -y python3-dotenv
RUN apt-get install -y python3-requests
RUN mkdir -p /logs /app

COPY logs/getAgentComponentStats.py /getAgentComponentStats.py
COPY logs/lastKeepAliveGet.py /lastKeepAliveGet.py
COPY logs/top_login_count_logs.py /top_login_count_logs.py
COPY env/.env /app/.env

COPY cronfile /etc/cron.d/cronfile
RUN chmod 0644 /etc/cron.d/cronfile

RUN chmod +x /getAgentComponentStats.py
RUN chmod +x /lastKeepAliveGet.py
RUN chmod +x /top_login_count_logs.py

RUN crontab /etc/cron.d/cronfile

# RUN crontab -u root cronfile && \
   #  rm cronfile


CMD ["cron", "-f"]
